<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset='utf-8'>
		<title>Minimal Jekyll API</title>
		<script src="http://fb.me/react-0.11.1.js"></script>
		<script src="http://fb.me/JSXTransformer-0.11.1.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/superagent/0.15.7/superagent.min.js"></script>
		<link rel="stylesheet" href="css/style.css">        
	</head>
	<body>
		<div id="content"></div>
		<script type="text/jsx">
			/** @jsx React.DOM */

			var SearchExample = React.createClass({

				getInitialState: function(){
					return { 
						searchString: '',
						items: []
					};
				},

				componentWillMount: function() {
					var request = window.superagent;
					var self = this;

					var url = 'api/members.json';
					request.get(url, function(response){
						self.setState({items: JSON.parse(response.text)});
					});
				},

				handleChange: function(e){

					this.setState({searchString:e.target.value});
				},

				render: function() {
					var items = this.state.items;
					var	searchString = this.state.searchString.trim().toLowerCase();

					//console.log(items);
					if(searchString.length > 0){
						// Filter the results.
						items = items.filter(function(l){
							return l.name.toLowerCase().match( searchString );
						});
					}

					return (
						<div>
							<p>update by editing <a href="https://github.com/pe3/data-repo-test/blob/gh-pages/_data/members.yml">yaml file</a></p>
							<input type="text" value={this.state.searchString} onChange={this.handleChange} placeholder="Type here" />
							<ul> 
								{ items.map(function(l){
									return <li>{l.name} <a href={l.url}>{l.url}</a></li>
								}) }
							</ul>
						</div>
					);
				}
			});

			React.renderComponent(
				<SearchExample />,
				document.body
			);
		</script>
	</body>
</html>â€¨